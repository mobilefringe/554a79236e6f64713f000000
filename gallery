<div class="position_relative page_header margin_bottom_none">
    <div class="page_heading"></div>
</div>
<div class="content_container" style="min-height:600px">
    <h4 class="page_heading2">Gallery</h4>
    
    <!--<div id="pano"></div>-->
    

    
    
    
    <!--<div class="trend-holder-img" id="trend-holders">-->
    <!--    <script id="trend_holder_template" type="x-tmpl-mustache">-->
    <!--        <div class="trend-item" id="redevelopment{{redevelopment_id}}" style="{{showItem}}">-->
    <!--            <img alt="" src="{{photo_source}}" />-->
    <!--        </div>-->
    <!--    </script>-->
    <!--</div>-->
   
        <div class="trend-navi" id="trend-navi">
            <div class="flexslider">
                <script id="trend_template" type="x-tmpl-mustache">
                    <ul class="slides">
                        <li>
                            <img alt="redevelopment" height="132" src="{{photo_source}}" width="198" />
                        </li>
                    </ul>
                </script>
            </div>
        </div>
    
    
    
</div>

<script>
    $(document).ready(function(){
       init();
       
       function renderAll (){
            $(".modal-backdrop").remove();
            
            $('.flexslider').flexslider({
                animation: "slide"
              });
  
            var fashions = getFashions();
            renderTrendReport('#trend_template', '#trend-navi', fashions);            
            renderTrendReport('#trend_holder_template', '#trend-holders', fashions);
            renderpageHTML();
            contentSwitcher();
        }
        
        function renderTrendReport(trend_template, trend_item, fashionItems){
            var item_list = [];
            var trend_template_html = $(trend_template).html();
            Mustache.parse(trend_template_html);
            var count = 0;
            $.each( fashionItems , function( key, val ) {  
                 if( val.name == "Redevelopment"){
                     $.each( val.fashion_images , function( key, val ) {
                        if (count > 0){
                            val.showItem = 'display:none;'; 
                        }
                        val.redevelopment_id = count + 1;
                        val.caption_link = val.caption.replace(/ /g,'-');
                        val.photo_source = getImageURL(val.photo_url);
                        var trend_rendered = Mustache.render(trend_template_html,val);
                        item_list.push(trend_rendered);
                        count += 1;
                     });
                 }
            });
            $(trend_item).show();
            $(trend_item).html(item_list.join(''));
        }
        
        
        function panoImage(){
            'use strict';

            // Create viewer.
            var viewer = new Marzipano.Viewer(document.getElementById('pano'));
            
            // Create source.
            var source = Marzipano.ImageUrlSource.fromString(
              "http://assets.codecloudapp.com/sites/581a35806e6f6446b0080000/image/jpeg/1477658428000/FoodCourt_Final.jpg"
            );
            
            // Create geometry.
            var geometry = new Marzipano.EquirectGeometry([{ width: 4000 }]);
            
            // Create view.
            var limiter = Marzipano.RectilinearView.limit.traditional(1024, 100*Math.PI/180);
            var view = new Marzipano.RectilinearView({ yaw: Math.PI }, limiter);
            
            // Create scene.
            var scene = viewer.createScene({
              source: source,
              geometry: geometry,
              view: view,
              pinFirstLevel: true
            });
            
            // Display scene.
            scene.switchTo();
        }
        
        loadMallDataCached(renderAll); 
    });
</script>